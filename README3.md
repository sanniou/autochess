# 自走棋游戏项目

基于Godot引擎开发的自走棋游戏，结合杀戮尖塔的分支树形地图设计。

## 项目概述

这是一个使用Godot 4.4.1开发的自走棋游戏，具有以下特点：

- 杀戮尖塔式的分支树形地图
- 自走棋战斗规则
- 棋子羁绊系统
- 装备和遗物系统
- 随机事件系统
- 多语言支持（当前仅支持简体中文）
- 存档系统
- 成就系统
- 皮肤系统

## 项目架构

项目采用模块化设计，各系统通过事件总线进行松耦合通信，配置数据与逻辑代码分离。

### 核心系统

- [x] **游戏管理器 (GameManager)**: 负责游戏状态管理和系统协调
- [x] **事件总线 (EventBus)**: 实现系统间的松耦合通信
- [x] **配置管理器 (ConfigManager)**: 负责加载和管理游戏配置数据
- [x] **存档管理器 (SaveManager)**: 负责游戏数据的持久化和加载
- [x] **本地化管理器 (LocalizationManager)**: 提供多语言支持
- [x] **音频管理器 (AudioManager)**: 负责游戏音频的播放和管理
- [x] **调试管理器 (DebugManager)**: 提供调试功能和日志记录

### 工具类

- [x] **状态机 (StateMachine)**: 通用状态机实现，用于管理游戏对象的状态
- [x] **资源管理器 (ResourceManager)**: 负责游戏资源的加载和缓存
- [x] **对象池 (ObjectPool)**: 用于管理和重用游戏对象，提高性能
- [x] **数学工具 (MathUtils)**: 提供常用的数学函数和算法
- [x] **随机工具 (RandomUtils)**: 提供高级随机数生成和随机选择功能
- [x] **调试工具 (DebugUtils)**: 提供调试和性能分析功能

### 游戏逻辑系统

- [ ] **地图系统**: 生成和管理杀戮尖塔式的分支树形地图
- [ ] **棋盘系统**: 管理战斗和准备阶段的棋盘
- [ ] **棋子系统**: 管理棋子的创建、升级和属性
- [ ] **战斗系统**: 实现自动战斗的逻辑
- [ ] **经济系统**: 管理金币和商店
- [ ] **装备系统**: 管理装备的使用和合成
- [ ] **遗物系统**: 管理遗物效果
- [ ] **事件系统**: 管理随机事件
- [ ] **玩家系统**: 管理玩家状态和属性
- [ ] **羁绊系统**: 管理棋子羁绊效果

### 表现层系统

- [ ] **UI系统**: 管理游戏界面和交互
- [ ] **场景管理**: 管理场景切换和过渡
- [ ] **动画系统**: 管理游戏动画
- [ ] **特效系统**: 管理游戏特效
- [ ] **皮肤系统**: 管理游戏皮肤

### 辅助系统

- [ ] **成就系统**: 管理游戏成就
- [ ] **教程系统**: 提供新手引导
- [ ] **网络系统**: 预留多人游戏接口

## 目录结构

```
autochess/
├── addons/                    # 第三方插件
├── assets/                    # 游戏资源
│   ├── audio/                 # 音频资源
│   │   ├── bgm/               # 背景音乐
│   │   ├── sfx/               # 音效
│   │   └── ui/                # UI音效
│   ├── fonts/                 # 字体资源
│   ├── images/                # 图片资源
│   │   ├── backgrounds/       # 背景图
│   │   ├── icons/             # 图标
│   │   ├── ui/                # UI图片
│   │   └── vfx/               # 视觉特效
│   ├── models/                # 3D模型(如果使用)
│   └── shaders/               # 着色器
├── config/                    # 配置文件
│   ├── chess_pieces.json      # 棋子配置 [已完成]
│   ├── equipment.json         # 装备配置 [已完成]
│   ├── map_nodes.json         # 地图节点配置 [已完成]
│   ├── relics.json            # 遗物配置 [已完成]
│   ├── synergies.json         # 羁绊配置 [已完成]
│   ├── events.json            # 事件配置 [已完成]
│   ├── difficulty.json        # 难度配置 [已完成]
│   ├── achievements.json      # 成就配置 [已完成]
│   └── skins.json             # 皮肤配置 [已完成]
├── data/                      # 游戏数据
│   ├── localization/          # 本地化文件
│   │   └── zh_CN.json         # 简体中文 [已完成]
│   ├── saves/                 # 存档文件
│   └── settings/              # 设置文件
├── scenes/                    # 场景文件
│   ├── battle/                # 战斗场景
│   │   ├── battle_scene.tscn  # 战斗场景 [已完成]
│   │   └── battle_scene.gd    # 战斗场景脚本 [已完成]
│   ├── chess_board/           # 棋盘场景
│   ├── main_menu/             # 主菜单场景
│   │   ├── main_menu.tscn     # 主菜单场景 [已完成]
│   │   └── main_menu.gd       # 主菜单脚本 [已完成]
│   ├── map/                   # 地图场景
│   │   ├── map_scene.tscn     # 地图场景 [已完成]
│   │   ├── map_scene.gd       # 地图场景脚本 [已完成]
│   │   ├── map_node.tscn      # 地图节点场景 [已完成]
│   │   └── map_node.gd        # 地图节点脚本 [已完成]
│   └── shop/                  # 商店场景
│       ├── shop_scene.tscn    # 商店场景 [已完成]
│       └── shop_scene.gd      # 商店场景脚本 [已完成]
├── scripts/                   # 脚本文件
│   ├── autoload/              # 自动加载脚本(单例)
│   │   ├── event_bus.gd       # 事件总线 [已完成]
│   │   ├── game_manager.gd    # 游戏管理器 [已完成]
│   │   ├── save_manager.gd    # 存档管理器 [已完成]
│   │   ├── config_manager.gd  # 配置管理器 [已完成]
│   │   ├── localization_manager.gd # 本地化管理器 [已完成]
│   │   ├── audio_manager.gd   # 音频管理器 [已完成]
│   │   └── debug_manager.gd   # 调试管理器 [已完成]
│   ├── core/                  # 核心系统
│   │   ├── state_machine.gd   # 状态机 [已完成]
│   │   ├── resource_manager.gd # 资源管理器 [已完成]
│   │   └── object_pool.gd     # 对象池 [已完成]
│   ├── game/                  # 游戏逻辑
│   │   ├── battle/            # 战斗系统
│   │   │   ├── battle_manager.gd # 战斗管理器 [未完成]
│   │   │   ├── attack_system.gd # 攻击系统 [未完成]
│   │   │   └── aura_system.gd # 光环系统 [未完成]
│   │   ├── board/             # 棋盘系统
│   │   │   ├── board_manager.gd # 棋盘管理器 [未完成]
│   │   │   └── cell.gd        # 棋盘格子 [未完成]
│   │   ├── chess/             # 棋子系统
│   │   │   ├── chess_piece.gd # 棋子基类 [未完成]
│   │   │   ├── chess_factory.gd # 棋子工厂 [未完成]
│   │   │   └── synergy_manager.gd # 羁绊管理器 [未完成]
│   │   ├── economy/           # 经济系统
│   │   │   ├── economy_manager.gd # 经济管理器 [未完成]
│   │   │   └── shop_manager.gd # 商店管理器 [未完成]
│   │   ├── equipment/         # 装备系统
│   │   │   ├── equipment.gd   # 装备基类 [未完成]
│   │   │   └── equipment_manager.gd # 装备管理器 [未完成]
│   │   ├── map/               # 地图系统
│   │   │   ├── map_generator.gd # 地图生成器 [未完成]
│   │   │   ├── map_node.gd    # 地图节点 [未完成]
│   │   │   └── map_manager.gd # 地图管理器 [未完成]
│   │   ├── player/            # 玩家系统
│   │   │   ├── player.gd      # 玩家类 [未完成]
│   │   │   └── player_manager.gd # 玩家管理器 [未完成]
│   │   ├── relic/             # 遗物系统
│   │   │   ├── relic.gd       # 遗物基类 [未完成]
│   │   │   └── relic_manager.gd # 遗物管理器 [未完成]
│   │   └── events/            # 随机事件系统
│   │       ├── event.gd       # 事件基类 [未完成]
│   │       └── event_manager.gd # 事件管理器 [未完成]
│   ├── ui/                    # UI系统
│   │   ├── ui_manager.gd      # UI管理器 [未完成]
│   │   ├── scene_manager.gd   # 场景管理器 [未完成]
│   │   └── hud/               # HUD组件 [未完成]
│   └── utils/                 # 工具类
│       ├── debug_utils.gd     # 调试工具 [已完成]
│       ├── math_utils.gd      # 数学工具 [已完成]
│       └── random_utils.gd    # 随机数工具 [已完成]
└── tests/                     # 测试文件
    ├── unit/                  # 单元测试
    └── integration/           # 集成测试
```

## 当前进度

### 已完成

1. 项目基础架构设计
2. 核心系统实现（游戏管理器、事件总线、配置管理器等）
3. 工具类实现（状态机、资源管理器、对象池等）
4. 配置文件创建（棋子、装备、遗物、羁绊等）
5. 基本场景创建（主菜单、地图、战斗、商店）
6. 多语言支持（简体中文）

### 待完成

1. 游戏逻辑系统实现（棋子系统、战斗系统、装备系统等）
2. 表现层系统实现（UI系统、动画系统、特效系统等）
3. 辅助系统实现（成就系统、教程系统等）
4. 资源文件创建（图片、音频、模型等）
5. 游戏平衡性调整
6. 测试和优化

## 下一步计划

1. 实现棋子系统和棋盘系统
2. 实现战斗系统的核心逻辑
3. 实现装备系统和遗物系统
4. 完善UI系统和场景管理
5. 添加游戏资源（图片、音频等）

## 设计原则

1. **模块化设计**：各系统功能明确，职责单一
2. **松耦合通信**：系统间通过事件总线通信，降低耦合度
3. **数据驱动**：游戏数据与逻辑分离，便于调整和扩展
4. **可扩展性**：预留接口，便于添加新功能
5. **可维护性**：清晰的代码结构和注释，便于维护

## 技术栈

- Godot 4.4.1
- GDScript
- JSON（配置文件）
