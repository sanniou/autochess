# 自走棋游戏项目

基于Godot引擎开发的自走棋游戏，结合杀戮尖塔的分支树形地图设计。

## 项目概述

这是一个使用Godot 4.4.1开发的自走棋游戏，游戏地图采用杀戮尖塔的分支树形地图，战斗规则采用自走棋规则。游戏设计注重系统灵活性、可扩展性和可维护性。

## 核心设计原则

- **模块化设计**：各系统间解耦但能有效通信
- **数据驱动**：游戏数据与逻辑分离，便于平衡性调整
- **事件驱动**：使用信号(Signal)机制实现松耦合通信
- **状态模式**：使用状态机管理游戏流程和UI状态
- **单一职责**：每个系统只负责一个功能领域

## 已实现的系统

### 核心系统
- **游戏管理器 (GameManager)**: 负责游戏状态管理和系统协调
- **事件总线 (EventBus)**: 实现系统间的松耦合通信
- **配置管理器 (ConfigManager)**: 负责加载和管理游戏配置数据
- **存档管理器 (SaveManager)**: 负责游戏数据的持久化和加载
- **本地化管理器 (LocalizationManager)**: 提供多语言支持
- **音频管理器 (AudioManager)**: 负责游戏音频的播放和管理
- **调试管理器 (DebugManager)**: 提供调试功能和日志记录

### 工具类
- **状态机 (StateMachine)**: 通用状态机实现，用于管理游戏对象的状态
- **资源管理器 (ResourceManager)**: 负责游戏资源的加载和缓存
- **对象池 (ObjectPool)**: 用于管理和重用游戏对象，提高性能
- **数学工具 (MathUtils)**: 提供常用的数学函数和算法
- **随机工具 (RandomUtils)**: 提供高级随机数生成和随机选择功能
- **调试工具 (DebugUtils)**: 提供调试和性能分析功能

### 配置文件
- **棋子配置 (chess_pieces.json)**: 定义游戏中的棋子属性和技能
- **装备配置 (equipment.json)**: 定义游戏中的装备属性和效果
- **遗物配置 (relics.json)**: 定义游戏中的遗物属性和效果
- **羁绊配置 (synergies.json)**: 定义棋子的职业和种族羁绊效果
- **地图配置 (map_nodes.json)**: 定义地图节点类型和生成规则
- **事件配置 (events.json)**: 定义随机事件和选择效果
- **难度配置 (difficulty.json)**: 定义游戏难度级别和相关参数
- **成就配置 (achievements.json)**: 定义游戏成就和解锁条件
- **皮肤配置 (skins.json)**: 定义游戏皮肤和资源路径

### 基本场景
- **主菜单场景 (main_menu.tscn)**: 游戏入口点，提供开始游戏、继续游戏等选项
- **地图场景 (map_scene.tscn)**: 显示杀戮尖塔式的分支路径地图
- **战斗场景 (battle_scene.tscn)**: 玩家棋子与敌方棋子进行自动战斗的场景
- **商店场景 (shop_scene.tscn)**: 玩家可以购买棋子和装备的场景

### 多语言支持
- **中文本地化文件 (zh_CN.json)**: 提供简体中文的游戏文本

## 目录结构

```
autochess/
├── addons/                    # 第三方插件
├── assets/                    # 游戏资源
│   ├── audio/                 # 音频资源
│   │   ├── bgm/               # 背景音乐
│   │   ├── sfx/               # 音效
│   │   └── ui/                # UI音效
│   ├── fonts/                 # 字体资源
│   ├── images/                # 图片资源
│   │   ├── backgrounds/       # 背景图
│   │   ├── icons/             # 图标
│   │   ├── ui/                # UI图片
│   │   └── vfx/               # 视觉特效
│   ├── models/                # 3D模型(如果使用)
│   └── shaders/               # 着色器
├── config/                    # 配置文件
│   ├── chess_pieces.json      # 棋子配置
│   ├── equipment.json         # 装备配置
│   ├── map_nodes.json         # 地图节点配置
│   ├── relics.json            # 遗物配置
│   └── synergies.json         # 羁绊配置
├── data/                      # 游戏数据
│   ├── localization/          # 本地化文件
│   ├── saves/                 # 存档文件
│   └── settings/              # 设置文件
├── scenes/                    # 场景文件
│   ├── battle/                # 战斗场景
│   ├── chess_board/           # 棋盘场景
│   ├── main_menu/             # 主菜单场景
│   ├── map/                   # 地图场景
│   └── shop/                  # 商店场景
├── scripts/                   # 脚本文件
│   ├── autoload/              # 自动加载脚本(单例)
│   │   ├── event_bus.gd       # 事件总线
│   │   ├── game_manager.gd    # 游戏管理器
│   │   ├── save_manager.gd    # 存档管理器
│   │   └── settings_manager.gd # 设置管理器
│   ├── core/                  # 核心系统
│   │   ├── config_manager.gd  # 配置管理器
│   │   ├── resource_manager.gd # 资源管理器
│   │   └── state_machine.gd   # 状态机
│   ├── game/                  # 游戏逻辑
│   │   ├── battle/            # 战斗系统
│   │   ├── board/             # 棋盘系统
│   │   ├── chess/             # 棋子系统
│   │   ├── economy/           # 经济系统
│   │   ├── equipment/         # 装备系统
│   │   ├── map/               # 地图系统
│   │   ├── player/            # 玩家系统
│   │   ├── relic/             # 遗物系统
│   │   └── events/            # 随机事件系统
│   ├── ui/                    # UI系统
│   └── utils/                 # 工具类
└── tests/                     # 测试文件
```

## 待实现的系统

1. **棋子系统**: 实现棋子的创建、升级、移动和战斗逻辑
2. **棋盘系统**: 实现棋盘格子的交互和棋子放置逻辑
3. **战斗系统**: 实现自动战斗的核心逻辑
4. **装备系统**: 实现装备的使用和合成逻辑
5. **遗物系统**: 实现遗物效果的应用逻辑
6. **事件系统**: 实现随机事件的触发和选择逻辑
7. **UI系统**: 完善各个场景的用户界面
8. **教程系统**: 添加新手引导和教程

## 系统间交互

系统间通过事件总线(EventBus)进行松耦合通信，主要信号包括：

- 游戏状态相关信号
- 地图相关信号
- 棋盘相关信号
- 棋子相关信号
- 战斗相关信号
- 经济相关信号
- 装备相关信号
- 遗物相关信号
- 事件相关信号
- 玩家相关信号
- UI相关信号
- 成就相关信号
- 存档相关信号
- 多语言相关信号
- 音频相关信号
- 调试相关信号

## 下一步计划

1. 实现棋子系统和棋盘系统的核心逻辑
2. 完善战斗系统，实现自动战斗
3. 实现装备和遗物系统
4. 完善UI界面和交互
5. 添加更多游戏内容和平衡性调整
